#drawflow {
    width: 100%;
    height: 600px; /* Aumentato l'altezza per visualizzare meglio */
    background: #f9f9f9;
    border: 1px solid #ddd;
    position: relative;
}

.drawflow .drawflow-node {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    padding: 10px;
    min-width: 200px;
}

.drawflow .drawflow-node.file-node {
    background: #f5f5f5;
    border-left: 4px solid #5bc0de;
}

.drawflow .drawflow-node.ai-source {
    background: #e6f3ff;
    border-left: 4px solid #337ab7;
}

.drawflow .drawflow-node.docx-target {
    background: #e6ffe6;
    border-left: 4px solid #4cae4c;
}

.drawflow .drawflow-node.tag-node {
    background: #fff9e6;
    border-left: 4px solid #f0ad4e;
}

.drawflow .drawflow-node.ai-tag-node {
    background: #ffecf0;
    border-left: 4px solid #d9534f;
}

.drawflow .connection {
    stroke: #366e97;
    stroke-width: 2px;
}

.drawflow .connection.selected {
    stroke: #5072e4;
}

.ai-content {
    font-size: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: 120px;
}

.tag-content {
    font-size: 12px;
    font-style: italic;
    color: #666;
    margin-top: 5px;
}

.file-info {
    font-size: 11px;
    color: #777;
    margin-top: 5px;
}

.file-icon {
    font-size: 16px;
    margin-right: 5px;
    vertical-align: middle;
}

.file-thumbnail {
    max-width: 100px;
    max-height: 80px;
    margin: 5px auto;
    border: 1px solid #ddd;
    border-radius: 4px;
    display: block;
}

.original-image {
    max-width: 90px;  /* Leggermente più piccola per indicare che non è una thumbnail */
    opacity: 0.9;
}

.pdf-thumbnail {
    width: 80px;
    height: 60px;
    margin: 5px auto;
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.pdf-thumbnail i {
    font-size: 32px;
    color: #d9534f;
}

.node-with-thumbnail {
    min-width: 140px; /* Assicura spazio sufficiente per la thumbnail */
}

.drawflow-toolbar {
    padding: 10px;
    background: #f0f0f0;
    margin-bottom: 10px;
    border-radius: 4px;
}

.node-category {
    display: inline-block;
    margin-right: 15px;
    margin-bottom: 10px;
    padding: 3px 8px;
    border-radius: 4px;
    cursor: pointer;
}

.node-category.file-nodes {
    background: #f5f5f5;
    border: 1px solid #5bc0de;
}

.node-category.ai-files {
    background: #e6f3ff;
    border: 1px solid #337ab7;
}

.node-category.docx-fields {
    background: #e6ffe6;
    border: 1px solid #4cae4c;
}

.node-category.tag-nodes {
    background: #fff9e6;
    border: 1px solid #f0ad4e;
}

.node-category.ai-tags {
    background: #ffecf0;
    border: 1px solid #d9534f;
}

.node-category.active {
    box-shadow: 0 0 5px rgba(0,0,0,0.3);
}

.badge.badge-info {
    background-color: #17a2b8;
    color: white;
    font-size: 10px;
    padding: 2px 5px;
    border-radius: 3px;
    margin-left: 5px;
}

.tag-badge {
    display: inline-block;
    background-color: #f8f9fa;
    border: 1px solid #ddd;
    color: #666;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    margin-top: 5px;
}

.drawflow .drawflow-node.ai-source.node-with-thumbnail {
    min-height: 220px;
}

.json-values {
    max-height: 150px;
    overflow-y: auto;
    font-size: 11px;
    margin-top: 5px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 4px;
    padding: 3px;
}

.json-value-item {
    padding: 3px 5px;
    margin: 2px 0;
    border-bottom: 1px dotted #ddd;
    display: flex;
    align-items: center;
    border-radius: 3px;
    transition: background-color 0.2s;
}

.json-value-item:hover {
    background-color: #f8f9fa;
}

.json-key {
    color: #0275d8;
    font-weight: bold;
}

.json-value {
    color: #444;
    margin-left: 3px;
}

.copy-icon {
    font-size: 10px;
    opacity: 0;
    float: right;
    transition: opacity 0.2s;
}

.json-value-item:hover .copy-icon {
    opacity: 0.7;
}

.json-value.copied {
    background-color: #d4edda;
    color: #155724;
    border-radius: 3px;
    padding: 0 3px;
    transition: all 0.3s;
}

/* Stile per i nodi JSON */
.drawflow .drawflow-node.json-value-node {
    background: #f0f8ff;
    border-left: 4px solid #5f9ea0;
}

.json-key-icon {
    color: #5f9ea0;
    margin-right: 5px;
}

.json-value-display {
    font-family: monospace;
    background: rgba(0,0,0,0.03);
    padding: 3px 6px;
    border-radius: 3px;
    margin: 5px 0;
    max-width: 170px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.json-source {
    font-size: 10px;
    color: #777;
    font-style: italic;
}

/* Stile per i nodi JSON con output multipli */
.drawflow .drawflow-node.json-object-node {
    background: #f0f8ff;
    border-left: 4px solid #5f9ea0;
    min-width: 250px;
}

.json-properties {
    margin-top: 10px;
    border-top: 1px solid #eee;
    padding-top: 5px;
}

.json-property {
    padding: 3px 5px;
    margin: 2px 0;
    font-size: 12px;
    border-radius: 3px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

.json-property:hover {
    background-color: rgba(0,0,0,0.05);
}

.json-property:after {
    content: "";
    position: absolute;
    right: -8px;
    top: 50%;
    transform: translateY(-50%);
    width: 8px;
    height: 2px;
    background-color: #5f9ea0;
}

.json-property .json-key {
    font-weight: bold;
    color: #5f9ea0;
    flex: 0 0 auto;
    margin-right: 8px;
}

.json-property .json-value {
    font-family: monospace;
    flex: 1 1 auto;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    text-align: right;
    max-width: 150px;
}

.json-source {
    font-size: 10px;
    color: #777;
    font-style: italic;
    margin-top: 8px;
    text-align: center;
}

/* Stili per i nodi JSON */
.drawflow .drawflow-node.json-parent-node {
    background: #d1ecf1;
    border-left: 4px solid #0c5460;
}

.drawflow .drawflow-node.json-property-node {
    background: #e9f5f8;
    border-left: 4px solid #17a2b8;
    min-width: 180px;
}

.json-key-icon {
    color: #17a2b8;
    margin-right: 5px;
}

.json-value-display {
    font-family: monospace;
    background: rgba(0,0,0,0.03);
    padding: 3px 6px;
    border-radius: 3px;
    margin: 5px 0;
    max-width: 170px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Stile per gli output e connessioni */
.drawflow .output {
    position: relative;
}

.drawflow .output::after {
    content: attr(data-name);
    position: absolute;
    right: 15px;
    top: -5px;
    font-size: 10px;
    color: #777;
    background: white;
    padding: 0 3px;
    border-radius: 3px;
    opacity: 0;
    transition: opacity 0.3s;
}

.drawflow .output:hover::after {
    opacity: 1;
}

/* Stile per i titoli dei tag */
.node-title.tag-label,
.node-title.ai-tag-label {
    font-size: 14px;
    font-weight: bold;
    padding: 6px 8px;
    border-radius: 4px;
    text-align: center;
    margin-bottom: 8px;
}

.node-title.tag-label {
    background-color: #fff3cd;
    color: #856404;
    border: 1px solid #ffeeba;
}

.node-title.ai-tag-label {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* Migliora il layout dei nodi tag */
.drawflow .drawflow-node.tag-node,
.drawflow .drawflow-node.ai-tag-node {
    min-width: 150px;
}

.drawflow .drawflow-node.filtered-out {
    opacity: 0.3;
    pointer-events: none;  /* Opzionale: disabilita interazioni con i nodi filtrati */
}

/* Aggiungi questi stili (che erano definiti in JavaScript) */

/* Stili per i nodi debug */
.master-debug-node {
    background-color: #e3f2fd;
    border: 3px solid #1976D2;
    min-width: 400px !important;
    min-height: 350px !important;
    width: 400px !important;
}

.master-debug-node .debug-node-title {
    background-color: #1976D2;
    color: white;
    padding: 10px;
    font-size: 16px;
    font-weight: bold;
}

.master-debug-node .debug-values {
    max-height: 280px !important;
    overflow-y: auto;
    margin-top: 10px;
    padding: 8px;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.master-debug-node .debug-description {
    font-size: 13px;
    margin: 10px 0;
    padding: 5px;
    background-color: #e8f5e9;
    border-radius: 4px;
    border-left: 3px solid #4caf50;
}

.debug-value-item {
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px dashed #ccc;
}

.debug-value-key {
    font-weight: bold;
    color: #1976D2;
    font-size: 14px;
    display: block;
    margin-bottom: 3px;
}

.debug-value-path {
    font-size: 12px;
    color: #666;
    margin-left: 5px;
}

.debug-value-source {
    color: #666;
    font-style: italic;
    font-size: 12px;
}

.debug-value-content {
    background: #fff;
    padding: 8px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    margin-top: 5px;
    white-space: pre-wrap;
    word-break: break-word;
    font-size: 13px;
    max-height: 150px;
    overflow-y: auto;
}

.resized {
    transition: all 0.3s ease;
}

.json-content {
    font-family: monospace;
    background-color: #f8f9fa;
}